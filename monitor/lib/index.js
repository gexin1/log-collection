"use strict";

var _child_process = require("child_process");

var watchFile = process.env.watch_file;

if (!watchFile) {
  console.error("\u8BF7\u4F20\u5165 process.env.watch_file");
  process.exit();
}

var ls = (0, _child_process.spawn)('tail', ['-f', watchFile]);
ls.stdout.on('data', function (data) {
  try {
    var body = JSON.parse(data);
    console.log(JSON.stringify(body));
  } catch (error) {
    console.warn('ls.stdout data parse', error.message);
  }
});
ls.stderr.on('data', function (data) {
  console.error("stderr: ".concat(data));
});
ls.on('close', function (code) {
  console.log("\u5B50\u8FDB\u7A0B\u9000\u51FA\uFF0C\u9000\u51FA\u7801 ".concat(code));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ3YXRjaEZpbGUiLCJwcm9jZXNzIiwiZW52Iiwid2F0Y2hfZmlsZSIsImNvbnNvbGUiLCJlcnJvciIsImV4aXQiLCJscyIsInN0ZG91dCIsIm9uIiwiZGF0YSIsImJvZHkiLCJKU09OIiwicGFyc2UiLCJsb2ciLCJzdHJpbmdpZnkiLCJ3YXJuIiwibWVzc2FnZSIsInN0ZGVyciIsImNvZGUiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBRUEsSUFBTUEsU0FBUyxHQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUI7O0FBRUEsSUFBSSxDQUFDSCxTQUFMLEVBQWdCO0FBQ2RJLEVBQUFBLE9BQU8sQ0FBQ0MsS0FBUjtBQUNBSixFQUFBQSxPQUFPLENBQUNLLElBQVI7QUFDRDs7QUFFRCxJQUFNQyxFQUFFLEdBQUcsMEJBQU0sTUFBTixFQUFjLENBQUMsSUFBRCxFQUFPUCxTQUFQLENBQWQsQ0FBWDtBQUVBTyxFQUFFLENBQUNDLE1BQUgsQ0FBVUMsRUFBVixDQUFhLE1BQWIsRUFBcUIsVUFBQ0MsSUFBRCxFQUFVO0FBQzdCLE1BQUk7QUFDRixRQUFNQyxJQUFZLEdBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXSCxJQUFYLENBQXJCO0FBQ0FOLElBQUFBLE9BQU8sQ0FBQ1UsR0FBUixDQUFZRixJQUFJLENBQUNHLFNBQUwsQ0FBZUosSUFBZixDQUFaO0FBQ0QsR0FIRCxDQUdFLE9BQU9OLEtBQVAsRUFBYztBQUNkRCxJQUFBQSxPQUFPLENBQUNZLElBQVIsQ0FBYSxzQkFBYixFQUFxQ1gsS0FBSyxDQUFDWSxPQUEzQztBQUNEO0FBQ0YsQ0FQRDtBQVNBVixFQUFFLENBQUNXLE1BQUgsQ0FBVVQsRUFBVixDQUFhLE1BQWIsRUFBcUIsVUFBQ0MsSUFBRCxFQUFVO0FBQzdCTixFQUFBQSxPQUFPLENBQUNDLEtBQVIsbUJBQXlCSyxJQUF6QjtBQUNELENBRkQ7QUFJQUgsRUFBRSxDQUFDRSxFQUFILENBQU0sT0FBTixFQUFlLFVBQUNVLElBQUQsRUFBVTtBQUN2QmYsRUFBQUEsT0FBTyxDQUFDVSxHQUFSLGtFQUF5QkssSUFBekI7QUFDRCxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3Bhd24gfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcblxuY29uc3Qgd2F0Y2hGaWxlID0gcHJvY2Vzcy5lbnYud2F0Y2hfZmlsZTtcblxuaWYgKCF3YXRjaEZpbGUpIHtcbiAgY29uc29sZS5lcnJvcihg6K+35Lyg5YWlIHByb2Nlc3MuZW52LndhdGNoX2ZpbGVgKTtcbiAgcHJvY2Vzcy5leGl0KCk7XG59XG5cbmNvbnN0IGxzID0gc3Bhd24oJ3RhaWwnLCBbJy1mJywgd2F0Y2hGaWxlXSk7XG5cbmxzLnN0ZG91dC5vbignZGF0YScsIChkYXRhKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keTogT2JqZWN0ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShib2R5KSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdscy5zdGRvdXQgZGF0YSBwYXJzZScsIGVycm9yLm1lc3NhZ2UpO1xuICB9XG59KTtcblxubHMuc3RkZXJyLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgY29uc29sZS5lcnJvcihgc3RkZXJyOiAke2RhdGF9YCk7XG59KTtcblxubHMub24oJ2Nsb3NlJywgKGNvZGUpID0+IHtcbiAgY29uc29sZS5sb2coYOWtkOi/m+eoi+mAgOWHuu+8jOmAgOWHuueggSAke2NvZGV9YCk7XG59KTtcbiJdfQ==